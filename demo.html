<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moulded Fantasy - Premium Eggless Cakes (Demo)</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:ital,wght@0,500;0,700;1,500&display=swap" rel="stylesheet">

    <style>
        /*
        ========================================
        CSS (All in one file as requested)
        ========================================
        */

        /* 1. CSS Variables (Brand Palette) */
        :root {
            --font-serif: 'Playfair Display', serif;
            --font-sans: 'Inter', sans-serif;

            --color-white: #FFFFFF;
            --color-bg-light: #FFFBFB; /* Very light pink */
            --color-pink-light: #fdeff2;
            --color-pink-mid: #fde6f0;
            --color-pink-accent: #c47c94;
            --color-gold: #D4AF37;
            --color-gold-dark: #b48b00;
            --color-text-dark: #333;
            --color-text-light: #666;
            --color-border: #eee;
            --color-error: #D32F2F;

            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -4px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        /* 2. Base & Body Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            color: var(--color-text-dark);
            background-color: var(--color-bg-light);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* 3. Typography */
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-serif);
            color: var(--color-text-dark);
            font-weight: 700;
            line-height: 1.2;
        }

        h1 { font-size: 3.5rem; }
        h2 { font-size: 2.75rem; }
        h3 { font-size: 1.75rem; }
        p { 
            font-size: 1rem;
            color: var(--color-text-light);
            margin-bottom: 1rem;
        }
        a {
            color: var(--color-pink-accent);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        a:hover {
            color: var(--color-gold-dark);
        }

        /* 4. Layout & Helpers */
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 4rem 0;
        }
        .text-center { text-align: center; }
        .text-gold { color: var(--color-gold); }
        .section-title {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 3rem;
            font-weight: 500;
            font-style: italic;
        }
        .section-title::after {
            content: 'âœ¿';
            display: block;
            font-size: 1.5rem;
            color: var(--color-gold);
            margin-top: 0.5rem;
        }
        .hidden { display: none !important; }

        /* 5. Buttons */
        .btn {
            display: inline-block;
            font-family: var(--font-sans);
            font-weight: 500;
            font-size: 1rem;
            padding: 0.8rem 1.8rem;
            border-radius: 50px;
            border: 2px solid transparent;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            text-align: center;
        }
        .btn-primary {
            background-color: var(--color-pink-accent);
            color: var(--color-white);
            border-color: var(--color-pink-accent);
        }
        .btn-primary:hover {
            background-color: #a4637a;
            border-color: #a4637a;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        .btn-secondary {
            background-color: transparent;
            color: var(--color-pink-accent);
            border-color: var(--color-pink-accent);
        }
        .btn-secondary:hover {
            background-color: var(--color-pink-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }
        .btn-gold {
            background-color: var(--color-gold);
            color: var(--color-white);
            border-color: var(--color-gold);
            font-weight: 700;
        }
        .btn-gold:hover {
            background-color: var(--color-gold-dark);
            border-color: var(--color-gold-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* 6. Header & Navigation */
        .main-header {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--color-border);
            padding: 1.2rem 5%;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-family: var(--font-serif);
            font-size: 1.8rem;
            font-weight: 700;
            font-style: italic;
            color: var(--color-text-dark);
            cursor: pointer;
        }
        .main-nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
        }
        .main-nav a {
            font-family: var(--font-sans);
            font-weight: 500;
            font-size: 1rem;
            color: var(--color-text-light);
            padding: 0.5rem 0;
            position: relative;
        }
        .main-nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--color-gold);
            transition: width 0.3s ease;
        }
        .main-nav a:hover::after,
        .main-nav a.active-link::after {
            width: 100%;
        }
        .header-cart {
            position: relative;
            cursor: pointer;
        }
        .header-cart-icon {
            width: 28px;
            height: 28px;
            stroke: var(--color-text-dark);
            stroke-width: 1.5;
        }
        #cart-counter {
            position: absolute;
            top: -8px;
            right: -10px;
            background-color: var(--color-pink-accent);
            color: var(--color-white);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.75rem;
            font-weight: 700;
            transform: scale(0);
            transition: transform 0.2s ease;
        }
        #cart-counter.active {
            transform: scale(1);
        }
        .mobile-nav-toggle {
            display: none; /* For future responsiveness */
            cursor: pointer;
        }

        /* 7. Page Simulation System */
        .page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .page.active-page {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* 8. Hero Section (Home Page) */
        .hero {
            min-height: 90vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(rgba(255, 251, 251, 0.8), rgba(255, 251, 251, 0.8)), url('https://placehold.co/1920x1080/fdeff2/c47c94?text=Moulded+Fantasy+Cakes') no-repeat center center/cover;
            padding: 2rem;
        }
        .hero-content {
            max-width: 800px;
        }
        .hero-content h1 {
            font-size: 4.5rem;
            font-style: italic;
            margin-bottom: 1.5rem;
            color: var(--color-text-dark);
        }
        .hero-content p {
            font-size: 1.25rem;
            color: var(--color-text-light);
            margin-bottom: 2.5rem;
        }
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        .hero-buttons .btn {
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
        }

        /* 9. Product Grid ("Shop" Page & Home) */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
        }
        .product-card {
            background: var(--color-white);
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .product-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-5px);
        }
        .product-card-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }
        .product-card-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .product-card-content h3 {
            font-size: 1.4rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        .product-card-content .price {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--color-pink-accent);
            margin-bottom: 1rem;
        }
        .product-card-content .description {
            font-size: 0.9rem;
            color: var(--color-text-light);
            flex-grow: 1;
            margin-bottom: 1.5rem;
        }
        .product-card .btn {
            width: 100%;
            border-radius: 8px;
        }

        /* 10. Instagram Feed (Home Page) */
        .instagram-feed {
            background: var(--color-white);
            padding: 4rem 0;
        }
        .instagram-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        .insta-post {
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            aspect-ratio: 1 / 1;
        }
        .insta-post img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        .insta-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            color: var(--color-white);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.4s ease;
            font-size: 1.5rem;
            font-weight: 500;
        }
        .insta-post:hover img {
            transform: scale(1.1);
        }
        .insta-post:hover .insta-overlay {
            opacity: 1;
        }
        .insta-follow-link {
            text-align: center;
            margin-top: 2.5rem;
        }
        
        /* 11. "Custom Studio" Page */
        .studio-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }
        .studio-intro-image {
            width: 100%;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
        }
        .studio-intro-text h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        .studio-intro-text p {
            font-size: 1.1rem;
        }
        .studio-form-container {
            background: var(--color-white);
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            margin-top: 3rem;
        }
        .studio-form-step {
            display: none;
            animation: fadeIn 0.5s;
        }
        .studio-form-step.active-step {
            display: block;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group input[type="date"],
        .form-group input[type="number"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem 1rem;
            font-family: var(--font-sans);
            font-size: 1rem;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            background: var(--color-bg-light);
        }
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        .form-group .form-error {
            color: var(--color-error);
            font-size: 0.85rem;
            margin-top: 0.25rem;
            display: none;
        }
        .studio-step-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        #studio-success-message {
            text-align: center;
            padding: 2rem;
            background: var(--color-pink-light);
            border-radius: 8px;
        }
        #studio-success-message h3 {
            color: var(--color-pink-accent);
        }
        .studio-progress-bar {
            width: 100%;
            height: 8px;
            background: var(--color-border);
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }
        #studio-progress-inner {
            width: 33.33%;
            height: 100%;
            background: var(--color-gold);
            transition: width 0.4s ease;
        }

        /* 12. "Gallery" & "About" Pages (Simple) */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .gallery-item {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            aspect-ratio: 1 / 1;
            transition: transform 0.3s ease;
        }
        .gallery-item img:hover {
            transform: scale(1.05);
        }
        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        .about-content img {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 2rem;
            box-shadow: 0 0 0 10px var(--color-white), 0 0 0 12px var(--color-pink-mid);
        }

        /* 13. Checkout Modal */
        .checkout-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2000;
            display: none; /* Changed by JS */
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }
        .checkout-modal.active {
            display: flex;
        }
        .checkout-content {
            width: 90%;
            max-width: 1000px;
            height: 90vh;
            background: var(--color-bg-light);
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .checkout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--color-border);
            background: var(--color-white);
        }
        .checkout-header h2 {
            font-size: 1.5rem;
            font-style: italic;
        }
        .checkout-close-btn {
            font-size: 2rem;
            color: var(--color-text-light);
            cursor: pointer;
            border: none;
            background: none;
        }
        .checkout-body {
            padding: 2rem;
            overflow-y: auto;
            flex-grow: 1;
            display: flex;
        }
        .checkout-steps-container {
            width: 65%;
            padding-right: 2rem;
            border-right: 1px solid var(--color-border);
        }
        .checkout-summary-container {
            width: 35%;
            padding-left: 2rem;
            background: var(--color-white);
            margin: -2rem -2rem -2rem 0; /* Extend to full height */
            padding: 2rem;
        }
        .checkout-step {
            display: none;
        }
        .checkout-step.active-step {
            display: block;
        }
        .checkout-progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }
        .checkout-progress-bar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--color-border);
            transform: translateY(-50%);
            z-index: 1;
        }
        .checkout-progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 2;
            background: var(--color-bg-light);
            padding: 0 0.5rem;
        }
        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--color-white);
            border: 2px solid var(--color-border);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            color: var(--color-text-light);
            transition: all 0.3s ease;
        }
        .step-label {
            font-size: 0.8rem;
            margin-top: 0.5rem;
            color: var(--color-text-light);
        }
        .checkout-progress-step.active .step-circle {
            border-color: var(--color-gold);
            background: var(--color-gold);
            color: var(--color-white);
        }
        .checkout-progress-step.active .step-label {
            color: var(--color-text-dark);
            font-weight: 500;
        }
        .checkout-progress-step.completed .step-circle {
            border-color: var(--color-pink-accent);
            background: var(--color-pink-accent);
            color: var(--color-white);
        }

        /* 14. Checkout Cart & Forms */
        .cart-item-list {
            max-height: 400px;
            overflow-y: auto;
            border-top: 1px solid var(--color-border);
            border-bottom: 1px solid var(--color-border);
        }
        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1.5rem 0.5rem;
            border-bottom: 1px solid var(--color-border);
        }
        .cart-item:last-child {
            border-bottom: none;
        }
        .cart-item-img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
        }
        .cart-item-details {
            flex-grow: 1;
        }
        .cart-item-details h4 {
            font-family: var(--font-sans);
            font-weight: 500;
            font-size: 1rem;
        }
        .cart-item-price {
            font-size: 0.9rem;
            color: var(--color-text-light);
        }
        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        .qty-control {
            display: flex;
            align-items: center;
            border: 1px solid var(--color-border);
            border-radius: 50px;
        }
        .qty-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.3rem 0.6rem;
            font-size: 1.2rem;
            color: var(--color-text-dark);
        }
        .qty-input {
            width: 30px;
            text-align: center;
            border: none;
            font-size: 1rem;
            font-weight: 500;
            background: none;
            -moz-appearance: textfield;
        }
        .qty-input::-webkit-outer-spin-button,
        .qty-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .remove-item-btn {
            font-size: 0.8rem;
            color: var(--color-error);
            background: none;
            border: none;
            cursor: pointer;
            text-decoration: underline;
        }
        .cart-empty-message {
            text-align: center;
            padding: 3rem 0;
            color: var(--color-text-light);
        }
        .checkout-summary-box {
            position: sticky;
            top: 2rem;
        }
        .checkout-summary-box h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 1rem;
        }
        .summary-line {
            display: flex;
            justify-content: space-between;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        .summary-line.total {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--color-text-dark);
            border-top: 1px solid var(--color-border);
            padding-top: 1rem;
            margin-top: 1rem;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        .checkout-step-buttons {
            display: flex;
            justify-content: flex-end;
            margin-top: 2rem;
            border-top: 1px solid var(--color-border);
            padding-top: 2rem;
        }
        #payment-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--color-white);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
            margin-right: 0.5rem;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        #process-payment-btn {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #checkout-confirmation {
            text-align: center;
            padding: 3rem 1rem;
        }
        #checkout-confirmation .confirmation-icon {
            font-size: 4rem;
            color: var(--color-pink-accent);
        }
        #checkout-confirmation h3 {
            font-size: 2rem;
            color: var(--color-pink-accent);
            margin-top: 1rem;
        }

        /* 15. Toast Notification */
        .toast-notification {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-text-dark);
            color: var(--color-white);
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 9999;
            font-weight: 500;
            transition: bottom 0.5s ease-in-out;
        }
        .toast-notification.show {
            bottom: 30px;
        }

        /* 16. Footer */
        .main-footer {
            background: var(--color-pink-light);
            color: var(--color-text-light);
            padding: 4rem 5%;
            text-align: center;
        }
        .footer-content {
            max-width: 600px;
            margin: 0 auto;
        }
        .footer-logo {
            font-family: var(--font-serif);
            font-size: 2rem;
            font-style: italic;
            color: var(--color-pink-accent);
            margin-bottom: 1rem;
        }
        .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .footer-links a {
            color: var(--color-text-light);
        }
        .footer-links a:hover {
            color: var(--color-pink-accent);
        }
        .footer-socials {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .footer-socials a {
            font-size: 1.5rem;
            color: var(--color-text-light);
        }
        .footer-socials a:hover {
            color: var(--color-pink-accent);
        }
        .footer-copy {
            font-size: 0.9rem;
            border-top: 1px solid var(--color-pink-mid);
            padding-top: 1.5rem;
            margin-top: 1.5rem;
        }

        /* 17. Responsive Design (Basic) */
        @media (max-width: 900px) {
            .main-nav { display: none; } /* Show mobile-nav-toggle */
            .mobile-nav-toggle { display: block; }
            .hero-content h1 { font-size: 3rem; }
            .hero-buttons { flex-direction: column; }
            .studio-container { grid-template-columns: 1fr; }
            .checkout-body { flex-direction: column; }
            .checkout-steps-container { width: 100%; padding-right: 0; border-right: none; }
            .checkout-summary-container { 
                width: 100%; 
                padding-left: 0; 
                margin: 2rem 0 0 0;
                padding: 1.5rem;
                background: var(--color-white);
            }
            .checkout-summary-box { position: static; }
            .form-grid { grid-template-columns: 1fr; }
            .form-group.full-width { grid-column: 1 / 1; }
        }
        @media (max-width: 600px) {
            .container { padding: 2rem 0; }
            .section-title { font-size: 2.2rem; }
            .hero-content h1 { font-size: 2.5rem; }
            .instagram-grid { grid-template-columns: repeat(2, 1fr); gap: 0.5rem; }
            .checkout-content { width: 100%; height: 100%; border-radius: 0; }
            .checkout-body { padding: 1rem; }
            .checkout-summary-container { margin: 1rem 0 0 0; padding: 1rem; }
            .cart-item { padding: 1rem 0; }
            .cart-item-img { width: 60px; height: 60px; }
        }

    </style>
</head>
<body>

    <header class="main-header">
        <div class="logo" data-page="home">Moulded Fantasy</div>
        <nav class="main-nav">
            <ul>
                <li><a href="#" class="nav-link active-link" data-page="home">Home</a></li>
                <li><a href="#" class="nav-link" data-page="shop">Shop Our Classics</a></li>
                <li><a href="#" class="nav-link" data-page="studio">The Custom Studio</a></li>
                <li><a href="#" class="nav-link" data-page="gallery">Gallery</a></li>
                <li><a href="#" class="nav-link" data-page="about">About</a></li>
            </ul>
        </nav>
        <div class="header-right">
            <div class="header-cart" id="cart-icon">
                <svg class="header-cart-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                </svg>
                <span id="cart-counter">0</span>
            </div>
            <div class="mobile-nav-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                </svg>
            </div>
        </div>
    </header>

    <main id="app-container">

        <section id="page-home" class="page active-page">
            
            <div class="hero">
                <div class="hero-content">
                    <h1>Artistry in Every Bite.</h1>
                    <p>Welcome to Moulded Fantasy, Mumbai's home for premium, 100% eggless custom cakes and confections. We craft edible art for your most cherished moments.</p>
                    <div class="hero-buttons">
                        <button class="btn btn-primary" data-page-btn="shop">Shop Our Classics</button>
                        <button class="btn btn-secondary" data-page-btn="studio">Book a Bespoke Consultation</button>
                    </div>
                </div>
            </div>

            <div class="container text-center">
                <h2 class="section-title">Fan Favourites</h2>
                <div class="product-grid" id="home-product-grid">
                    </div>
                <a href="#" class="btn btn-primary" data-page-btn="shop" style="margin-top: 3rem;">Shop All Classics</a>
            </div>

            <div class="instagram-feed">
                <div class="container" style="padding-top: 0; padding-bottom: 0;">
                    <h2 class="section-title">Our Edible Gallery</h2>
                    <div class="instagram-grid">
                        <a href="#" class="insta-post">
                            <img src="https://placehold.co/400x400/fde6f0/c47c94?text=3-Tier+Wedding+Cake" alt="3-Tier Wedding Cake">
                            <div class="insta-overlay">@mouldedfantasy</div>
                        </a>
                        <a href="#" class="insta-post">
                            <img src="https://placehold.co/400x400/fde6f0/c47c94?text=Floral+Buttercream" alt="Floral Buttercream">
                            <div class="insta-overlay">@mouldedfantasy</div>
                        </a>
                        <a href="#" class="insta-post">
                            <img src="https://placehold.co/400x400/fde6f0/c47c94?text=Fondant+Superhero" alt="Fondant Superhero">
                            <div class="insta-overlay">@mouldedfantasy</div>
                        </a>
                        <a href="#" class="insta-post">
                            <img src="https://placehold.co/400x400/fde6f0/c47c94?text=Elegant+Anniversary" alt="Elegant Anniversary">
                            <div class="insta-overlay">@mouldedfantasy</div>
                        </a>
                        <a href="#" class="insta-post">
                            <img src="https://placehold.co/400x400/fde6f0/c47c94?text=Custom+Cupcakes" alt="Custom Cupcakes">
                            <div class="insta-overlay">@mouldedfantasy</div>
                        </a>
                        <a href="#" class="insta-post">
                            <img src="https://placehold.co/400x400/fde6f0/c47c94?text=Baby+Shower+Cake" alt="Baby Shower Cake">
                            <div class="insta-overlay">@mouldedfantasy</div>
                        </a>
                    </div>
                    <div class="insta-follow-link">
                        <a href="#" class="btn btn-gold">Follow us on Instagram</a>
                    </div>
                </div>
            </div>

        </section>

        <section id="page-shop" class="page">
            <div class="container">
                <h2 class="section-title">Shop Our Classics</h2>
                <p class="text-center" style="margin-top: -2rem; margin-bottom: 3rem;">Signature cakes and treats, ready to order for your next celebration.</p>
                <div class="product-grid" id="shop-product-grid">
                    </div>
            </div>
        </section>

        <section id="page-studio" class="page">
            <div class="container">
                <div class="studio-container">
                    <div class="studio-intro-text">
                        <h2 class="section-title" style="text-align: left; margin-bottom: 1.5rem;">The Custom Studio</h2>
                        <p>This is where your vision becomes a masterpiece. Our bespoke service is designed for high-end, multi-tiered, and intricately designed cakes for weddings, anniversaries, and grand celebrations.</p>
                        <br>
                        <p>Please fill out our consultation form, and our design team will personally get in touch with you to schedule a one-on-one session.</p>
                    </div>
                    <div class="studio-intro-image-container">
                        <img src="https://placehold.co/600x700/fde6f0/c47c94?text=Bespoke+Wedding+Cake" alt="Bespoke Wedding Cake" class="studio-intro-image">
                    </div>
                </div>

                <div class="studio-form-container" id="studio-form-wrapper">
                    <div class="studio-progress-bar">
                        <div id="studio-progress-inner"></div>
                    </div>

                    <form id="studio-form-step-1" class="studio-form-step active-step">
                        <h3>Step 1: Event Details</h3>
                        <div class="form-group" style="margin-top: 1.5rem;">
                            <label for="event-type">Type of Event</label>
                            <select id="event-type" required>
                                <option value="" disabled selected>Select an event type...</option>
                                <option value="Wedding">Wedding / Engagement</option>
                                <option value="Anniversary">Anniversary</option>
                                <option value="Grand-Birthday">Grand Birthday (e.g., 18th, 21st, 50th)</option>
                                <option value="Corporate">Corporate Event</option>
                                <option value="Baby-Shower">Baby Shower / Bridal Shower</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="event-date">Date of Event</label>
                                <input type="date" id="event-date" required>
                            </div>
                            <div class="form-group">
                                <label for="event-guests">Number of Guests (Approx.)</label>
                                <input type="number" id="event-guests" placeholder="e.g., 100" min="20" required>
                                <small class="form-error" id="guests-error">Bespoke cakes are for 20+ guests.</small>
                            </div>
                        </div>
                        <div class="studio-step-buttons">
                            <button type="button" class="btn btn-secondary" disabled>Previous</button>
                            <button type="button" class="btn btn-primary" id="studio-next-1">Next: Your Vision</button>
                        </div>
                    </form>
                    
                    <form id="studio-form-step-2" class="studio-form-step">
                        <h3>Step 2: Your Vision</h3>
                        <div class="form-group" style="margin-top: 1.5rem;">
                            <label for="design-inspiration">Design Ideas & Inspiration</label>
                            <textarea id="design-inspiration" placeholder="Describe the theme, colors, style, or any specific elements you have in mind. Feel free to link to Pinterest boards." required></textarea>
                        </div>
                         <div class="form-group">
                            <label for="flavor-profile">Desired Flavor Profile (if known)</label>
                            <input type="text" id="flavor-profile" placeholder="e.g., Belgian Chocolate, Lemon Raspberry, etc.">
                        </div>
                        <div class="studio-step-buttons">
                            <button type="button" class="btn btn-secondary" id="studio-prev-2">Previous: Event Details</button>
                            <button type="button" class="btn btn-primary" id="studio-next-2">Next: Contact Info</button>
                        </div>
                    </form>

                    <form id="studio-form-step-3" class="studio-form-step">
                        <h3>Step 3: Your Contact Information</h3>
                        <div class="form-grid" style="margin-top: 1.5rem;">
                            <div class="form-group">
                                <label for="contact-name">Full Name</label>
                                <input type="text" id="contact-name" placeholder="Ankita Sharma" required>
                            </div>
                            <div class="form-group">
                                <label for="contact-email">Email Address</label>
                                <input type="email" id="contact-email" placeholder="ankita@example.com" required>
                            </div>
                        </div>
                         <div class="form-group">
                            <label for="contact-phone">Phone Number (Mumbai)</label>
                            <input type="tel" id="contact-phone" placeholder="98XXXXXX00" required>
                        </div>
                        <div class="studio-step-buttons">
                            <button type="button" class="btn btn-secondary" id="studio-prev-3">Previous: Your Vision</button>
                            <button type="button" class="btn btn-gold" id="studio-submit-btn">Submit Consultation Request</button>
                        </div>
                    </form>
                </div>

                <div id="studio-success-message" class="hidden">
                    <h3>Thank You!</h3>
                    <p>Your bespoke cake consultation request has been received. Our design team will review your vision and contact you within 2 business days to schedule your appointment.</p>
                </div>

            </div>
        </section>

        <section id="page-gallery" class="page">
            <div class="container">
                <h2 class="section-title">Our Art Gallery</h2>
                <p class="text-center" style="margin-top: -2rem; margin-bottom: 3rem;">A portfolio of our past creations. Find inspiration for your next masterpiece.</p>
                <div class="gallery-grid">
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Wedding+1" alt="Wedding Cake 1"></div>
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Birthday+1" alt="Birthday Cake 1"></div>
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Anniversary+1" alt="Anniversary Cake 1"></div>
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Floral+Details" alt="Floral Details"></div>
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Fondant+Art" alt="Fondant Art"></div>
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Wedding+2" alt="Wedding Cake 2"></div>
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Sculpted+Cake" alt="Sculpted Cake"></div>
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Kids+Theme" alt="Kids Theme Cake"></div>
                    <div class="gallery-item"><img src="https://placehold.co/600x600/fde6f0/c47c94?text=Elegant+Gold" alt="Elegant Gold Cake"></div>
                </div>
            </div>
        </section>

        <section id="page-about" class="page">
            <div class="container">
                <div class="about-content">
                    <img src="https://placehold.co/300x300/fde6f0/c47c94?text=Your+Photo" alt="Chef/Owner Photo">
                    <h2 class="section-title">Our Story</h2>
                    <p style="font-size: 1.1rem; color: var(--color-text-dark);">
                        Moulded Fantasy was born from a simple belief: a cake should be more than just dessert. It should be the centerpiece of a celebration, a work of art that tastes as incredible as it looks.
                    </p>
                    <p>
                        Founded by [Your Name], a passionate baker and artist, our Mumbai-based studio specializes in 100% eggless confections. We saw a need for premium, high-design cakes that didn't compromise on dietary preferences. From humble beginnings, we've grown into one of Mumbai's most sought-after bakeries for bespoke creations.
                    </p>
                    <p>
                        Our philosophy is simple: we use the finest ingredients, meticulous techniques, and a boundless imagination to bring your sweetest fantasies to life.
                    </p>
                </div>
            </div>
        </section>

    </main>
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-logo">Moulded Fantasy</div>
            <p>Crafting Mumbai's most artistic eggless cakes.</p>
            <ul class="footer-links">
                <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                <li><a href="#" class="nav-link" data-page="shop">Shop</a></li>
                <li><a href="#" class="nav-link" data-page="studio">Custom Studio</a></li>
                <li><a href="#" class="nav-link" data-page="about">About</a></li>
            </ul>
            <div class="footer-socials">
                <a href="#" title="Instagram">âœ¿</a> <a href="#" title="Facebook">âœ¿</a>
                <a href="#" title="Pinterest">âœ¿</a>
            </div>
            <div class="footer-copy">
                &copy; 2025 Moulded Fantasy. All Rights Reserved. <br>
                This is a fully functional demo built by [Your Agency Name].
            </div>
        </div>
    </footer>

    <div class="checkout-modal" id="checkout-modal">
        <div class="checkout-content">
            
            <div class="checkout-header">
                <h2>Your Order</h2>
                <button class="checkout-close-btn" id="checkout-close-btn">&times;</button>
            </div>

            <div class="checkout-body">

                <div class="checkout-steps-container">

                    <div class="checkout-progress-bar">
                        <div class="checkout-progress-step active" id="progress-step-1">
                            <div class="step-circle">1</div>
                            <div class="step-label">Cart</div>
                        </div>
                        <div class="checkout-progress-step" id="progress-step-2">
                            <div class="step-circle">2</div>
                            <div class="step-label">Delivery</div>
                        </div>
                        <div class="checkout-progress-step" id="progress-step-3">
                            <div class="step-circle">3</div>
                            <div class="step-label">Payment</div>
                        </div>
                    </div>

                    <div id="checkout-step-1" class="checkout-step active-step">
                        <h3>Review Your Cart</h3>
                        <div class="cart-item-list" id="modal-cart-list">
                            </div>
                        <div id="cart-empty-message" class="cart-empty-message hidden">
                            Your cart is empty.
                        </div>
                        <div class="checkout-step-buttons">
                            <button class="btn btn-primary" id="checkout-next-1" disabled>Proceed to Delivery</button>
                        </div>
                    </div>

                    <div id="checkout-step-2" class="checkout-step">
                        <h3>Delivery Details</h3>
                        <form id="delivery-form" class="form-grid" style="margin-top: 1.5rem;">
                            <div class="form-group full-width">
                                <label for="delivery-name">Full Name</label>
                                <input type="text" id="delivery-name" required>
                            </div>
                            <div class="form-group full-width">
                                <label for="delivery-address">Address</label>
                                <input type="text" id="delivery-address" placeholder="Flat, Building, Street, Area" required>
                            </div>
                            <div class="form-group">
                                <label for="delivery-pincode">Pincode (Mumbai Only)</label>
                                <input type="text" id="delivery-pincode" placeholder="e.g., 400001" required>
                                <small class="form-error" id="pincode-error">Sorry, we only deliver in Mumbai (Pincodes starting with 400).</small>
                            </div>
                            <div class="form-group">
                                <label for="delivery-phone">Phone Number</label>
                                <input type="tel" id="delivery-phone" required>
                            </div>
                            <div class="form-group full-width">
                                <label for="delivery-date">Preferred Delivery Date</label>
                                <input type="date" id="delivery-date" required>
                                <small class="form-error" id="date-error">Please select a date at least 2 days from now.</small>
                            </div>
                        </form>
                        <div class="checkout-step-buttons">
                            <button class="btn btn-secondary" id="checkout-prev-2">Back to Cart</button>
                            <button class="btn btn-primary" id="checkout-next-2">Proceed to Payment</button>
                        </div>
                    </div>

                    <div id="checkout-step-3" class="checkout-step">
                        <h3>Payment Details</h3>
                        <p>This is a demo. No real card details will be processed.</p>
                        <form id="payment-form" class="form-grid" style="margin-top: 1.5rem;">
                            <div class="form-group full-width">
                                <label for="card-name">Name on Card</label>
                                <input type="text" id="card-name" value="Ankita Sharma" required>
                            </div>
                            <div class="form-group full-width">
                                <label for="card-number">Card Number</label>
                                <input type="text" id="card-number" value="4242 4242 4242 4242" required>
                            </div>
                            <div class="form-group">
                                <label for="card-expiry">Expiry (MM/YY)</label>
                                <input type="text" id="card-expiry" value="12/28" required>
                            </div>
                            <div class="form-group">
                                <label for="card-cvv">CVV</label>
                                <input type="text" id="card-cvv" value="123" required>
                            </div>
                        </form>
                        <div class="checkout-step-buttons">
                            <button class="btn btn-secondary" id="checkout-prev-3">Back to Delivery</button>
                            <button class="btn btn-gold" id="process-payment-btn">
                                <span id="payment-spinner"></span>
                                <span id="process-payment-btn-text">Pay Now</span>
                            </button>
                        </div>
                    </div>

                    <div id="checkout-step-4" class="checkout-step">
                        <div id="checkout-confirmation">
                            <div class="confirmation-icon">âœ“</div>
                            <h3>Order Confirmed!</h3>
                            <p>Thank you for your purchase, Ankita!</p>
                            <p>Your order <strong id="order-number">#MF-12345</strong> is confirmed. You will receive an email shortly with your order details.</p>
                            <br>
                            <button class="btn btn-primary" id="confirmation-close-btn">Close</button>
                        </div>
                    </div>

                </div>

                <div class="checkout-summary-container">
                    <div class="checkout-summary-box">
                        <h3>Order Summary</h3>
                        <div id="modal-summary-items">
                            </div>
                        <div class="summary-line">
                            <span>Subtotal</span>
                            <span id="summary-subtotal">â‚¹0.00</span>
                        </div>
                        <div class="summary-line">
                            <span>Delivery Charges</span>
                            <span id="summary-delivery">â‚¹50.00</span>
                        </div>
                         <div class="summary-line">
                            <span>Taxes (5% GST)</span>
                            <span id="summary-tax">â‚¹0.00</span>
                        </div>
                        <div class="summary-line total">
                            <span>Total</span>
                            <span id="summary-total">â‚¹0.00</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="toast-notification" id="toast-notification">
        Item added to cart!
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // ===================================
            // 1. STATE & "DATABASE"
            // ===================================
            
            let cart = [];
            let currentPage = 'home';
            let currentCheckoutStep = 1;
            let currentStudioStep = 1;

            // Product "Database"
            const productsDB = [
                {
                    id: 'p1',
                    name: 'Belgian Chocolate Truffle',
                    price: 1200,
                    description: 'Rich, decadent, and moist. Our signature 1kg eggless chocolate truffle cake.',
                    image: 'https://placehold.co/400x400/fde6f0/c47c94?text=Chocolate+Truffle'
                },
                {
                    id: 'p2',
                    name: 'Classic Red Velvet',
                    price: 1400,
                    description: 'A 1kg timeless classic with a velvety texture and a tangy cream cheese frosting.',
                    image: 'https://placehold.co/400x400/fde6f0/c47c94?text=Red+Velvet'
                },
                {
                    id: 'p3',
                    name: 'Box of 6 Floral Cupcakes',
                    price: 750,
                    description: 'Assorted vanilla and chocolate cupcakes adorned with beautiful buttercream flowers.',
                    image: 'https://placehold.co/400x400/fde6f0/c47c94?text=Floral+Cupcakes'
                },
                {
                    id: 'p4',
                    name: 'Fresh Fruit Fantasia',
                    price: 1500,
                    description: 'A light 1kg vanilla sponge layered with fresh cream and seasonal fruits.',
                    image: 'https://placehold.co/400x400/fde6f0/c47c94?text=Fresh+Fruit'
                },
                {
                    id: 'p5',
                    name: 'Lotus Biscoff Cheesecake',
                    price: 1800,
                    description: 'A 1kg creamy, eggless baked cheesecake with a crunchy Biscoff base and topping.',
                    image: 'https://placehold.co/400x400/fde6f0/c47c94?text=Biscoff+Cheesecake'
                },
                {
                    id: 'p6',
                    name: 'Salted Caramel Drip Cake',
                    price: 1600,
                    description: 'A stunning 1kg chocolate cake with salted caramel buttercream and a gold drip.',
                    image: 'https://placehold.co/400x400/fde6f0/c47c94?text=Caramel+Drip'
                }
            ];
         // ===================================
            // 2. DOM SELECTORS
            // ===================================

            const appContainer = document.getElementById('app-container');
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link');
            const logo = document.querySelector('.logo');
            const heroShopBtn = document.querySelector('[data-page-btn="shop"]');
            const heroStudioBtn = document.querySelector('[data-page-btn="studio"]');
            
            // Product Grids
            const homeProductGrid = document.getElementById('home-product-grid');
            const shopProductGrid = document.getElementById('shop-product-grid');

            // Cart & Checkout
            const cartIcon = document.getElementById('cart-icon');
            const cartCounter = document.getElementById('cart-counter');
            const checkoutModal = document.getElementById('checkout-modal');
            const checkoutCloseBtn = document.getElementById('checkout-close-btn');
            const modalCartList = document.getElementById('modal-cart-list');
            const cartEmptyMsg = document.getElementById('cart-empty-message');
            const checkoutNext1 = document.getElementById('checkout-next-1');
            const checkoutPrev2 = document.getElementById('checkout-prev-2');
            const checkoutNext2 = document.getElementById('checkout-next-2');
            const checkoutPrev3 = document.getElementById('checkout-prev-3');
            const processPaymentBtn = document.getElementById('process-payment-btn');
            const confirmationCloseBtn = document.getElementById('confirmation-close-btn');
            
            // Checkout Summary
            const summaryItemsContainer = document.getElementById('modal-summary-items');
            const summarySubtotal = document.getElementById('summary-subtotal');
            const summaryDelivery = document.getElementById('summary-delivery');
            const summaryTax = document.getElementById('summary-tax');
            const summaryTotal = document.getElementById('summary-total');

            // Toast
            const toast = document.getElementById('toast-notification');

            // Custom Studio
            const studioFormWrapper = document.getElementById('studio-form-wrapper');
            const studioProgress = document.getElementById('studio-progress-inner');
            const studioNext1 = document.getElementById('studio-next-1');
            const studioPrev2 = document.getElementById('studio-prev-2');
            const studioNext2 = document.getElementById('studio-next-2');
            const studioPrev3 = document.getElementById('studio-prev-3');
            const studioSubmitBtn = document.getElementById('studio-submit-btn');
            const studioSuccessMsg = document.getElementById('studio-success-message');
            

            // ===================================
            // 3. CORE FUNCTIONS
            // ===================================

            /**
             * Handles all page navigation.
             * @param {string} pageId - The ID of the page to navigate to (e.g., 'home', 'shop').
             */
            function navigateTo(pageId) {
                if (currentPage === pageId) return; // Don't reload if already on page

                // Hide all pages
                pages.forEach(page => page.classList.remove('active-page'));
                
                // Show the target page
                const targetPage = document.getElementById(`page-${pageId}`);
                if (targetPage) {
                    targetPage.classList.add('active-page');
                    currentPage = pageId;
                }

                // Update active nav link
                navLinks.forEach(link => {
                    link.classList.toggle('active-link', link.dataset.page === pageId);
                });

                // Scroll to top
                window.scrollTo(0, 0);
            }

            /**
             * Renders the product cards into a target container.
             * @param {HTMLElement} targetContainer - The grid element to inject products into.
             * @param {Array} productArray - The array of products to render.
             */
            function renderProducts(targetContainer, productArray) {
                if (!targetContainer) return;
                targetContainer.innerHTML = ''; // Clear existing
                
                productArray.forEach(product => {
                    const productHTML = `
                        <div class="product-card">
                            <img src="${product.image}" alt="${product.name}" class="product-card-image">
                            <div class="product-card-content">
                                <h3>${product.name}</h3>
                                <span class="price">â‚¹${product.price.toFixed(2)}</span>
                                <p class="description">${product.description}</p>
                                <button class="btn btn-primary add-to-cart-btn" data-product-id="${product.id}">Add to Cart</button>
                            </div>
                        </div>
                    `;
                    targetContainer.innerHTML += productHTML;
                });
            }

            /**
             * Adds a product to the cart state.
             * @param {string} productId - The ID of the product to add.
             */
            function addToCart(productId) {
                const product = productsDB.find(p => p.id === productId);
                if (!product) return;

                const existingItem = cart.find(item => item.id === productId);

                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }

                updateCartCounter();
                showToast(`${product.name} added to cart!`);
            }

            /**
             * Updates the cart counter in the header.
             */
            function updateCartCounter() {
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCounter.textContent = totalItems;
                cartCounter.classList.toggle('active', totalItems > 0);
            }

            /**
             * Shows a toast notification.
             * @param {string} message - The message to display.
             */
            function showToast(message) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            // ===================================
            // 4. CHECKOUT MODAL FUNCTIONS
            // ===================================

            /**
             * Opens the checkout modal and renders the cart summary.
             */
            function openCheckout() {
                renderCartSummary();
                updateFullSummary();
                goToCheckoutStep(1); // Reset to first step
                checkoutModal.classList.add('active');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
            }

            /**
             * Closes the checkout modal.
             */
            function closeCheckout() {
                checkoutModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }

            /**
             * Renders the items in the cart list (Step 1).
             */
            function renderCartSummary() {
                if (cart.length === 0) {
                    modalCartList.innerHTML = '';
                    cartEmptyMsg.classList.remove('hidden');
                    checkoutNext1.disabled = true;
                } else {
                    cartEmptyMsg.classList.add('hidden');
                    checkoutNext1.disabled = false;
                    modalCartList.innerHTML = '';
                    
                    cart.forEach(item => {
                        const itemHTML = `
                            <div class="cart-item">
                                <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                                <div class="cart-item-details">
                                    <h4>${item.name}</h4>
                                    <span class="cart-item-price">â‚¹${item.price.toFixed(2)}</span>
                                    <div class="cart-item-actions">
                                        <div class="qty-control">
                                            <button class="qty-btn qty-decrease" data-product-id="${item.id}">-</button>
                                            <input type="number" class="qty-input" value="${item.quantity}" min="1" data-product-id="${item.id}">
                                            <button class="qty-btn qty-increase" data-product-id="${item.id}">+</button>
                                        </div>
                                        <button class="remove-item-btn" data-product-id="${item.id}">Remove</button>
                                    </div>
                                </div>
                                <span class="cart-item-total-price">â‚¹${(item.price * item.quantity).toFixed(2)}</span>
                            </div>
                        `;
                        modalCartList.innerHTML += itemHTML;
                    });
                }
            }

            /**
             * Updates the final summary box (right side).
             */
            function updateFullSummary() {
                summaryItemsContainer.innerHTML = ''; // Clear previous
                
                const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const delivery = cart.length > 0 ? 50.00 : 0.00;
                const tax = subtotal * 0.05;
                const total = subtotal + delivery + tax;

                // Populate summary items
                cart.forEach(item => {
                    const itemHTML = `
                        <div class="summary-line">
                            <span>${item.name} (x${item.quantity})</span>
                            <span>â‚¹${(item.price * item.quantity).toFixed(2)}</span>
                        </div>
                    `;
                    summaryItemsContainer.innerHTML += itemHTML;
                });

                // Update totals
                summarySubtotal.textContent = `â‚¹${subtotal.toFixed(2)}`;
                summaryDelivery.textContent = `â‚¹${delivery.toFixed(2)}`;
                summaryTax.textContent = `â‚¹${tax.toFixed(2)}`;
                summaryTotal.textContent = `â‚¹${total.toFixed(2)}`;
            }
            
            /**
             * Handles quantity changes from cart buttons.
             * @param {string} productId - The product ID.
             * @param {string} action - 'increase' or 'decrease'.
             */
            function handleQuantityChange(productId, action) {
                const item = cart.find(i => i.id === productId);
                if (!item) return;

                if (action === 'increase') {
                    item.quantity++;
                } else if (action === 'decrease') {
                    item.quantity--;
                    if (item.quantity === 0) {
                        removeFromCart(productId);
                        return; // Exit function as item is removed
                    }
                }
                
                // Re-render
                renderCartSummary();
                updateFullSummary();
            }

            /**
             * Handles quantity changes from cart input field.
             * @param {string} productId - The product ID.
             * @param {number} newQuantity - The new quantity from the input.
             */
            function handleQuantityInput(productId, newQuantity) {
                const item = cart.find(i => i.id === productId);
                if (!item) return;

                if (newQuantity < 1) {
                    removeFromCart(productId);
                    return;
                }
                item.quantity = newQuantity;
                
                // Re-render
                renderCartSummary();
                updateFullSummary();
            }

            /**
             * Removes an item from the cart.
             * @param {string} productId - The product ID to remove.
             */
            function removeFromCart(productId) {
                cart = cart.filter(i => i.id !== productId);
                
                // Re-render
                renderCartSummary();
                updateFullSummary();
            }
            
            /**
             * Navigates between checkout steps.
             * @param {number} stepNumber - The step to navigate to (1, 2, 3, 4).
             */
            function goToCheckoutStep(stepNumber) {
                currentCheckoutStep = stepNumber;

                // Hide all steps
                document.querySelectorAll('.checkout-step').forEach(step => step.classList.remove('active-step'));
                // Show target step
                document.getElementById(`checkout-step-${stepNumber}`).classList.add('active-step');

                // Update progress bar
                document.querySelectorAll('.checkout-progress-step').forEach((step, index) => {
                    const stepNum = index + 1;
                    step.classList.remove('active', 'completed');
                    if (stepNum < stepNumber) {
                        step.classList.add('completed');
                    } else if (stepNum === stepNumber) {
                        step.classList.add('active');
                    }
                });
            }

            /**
             * Validates the delivery form.
             * @returns {boolean} - True if valid, false otherwise.
             */
            function validateDeliveryForm() {
                let isValid = true;
                const pincodeInput = document.getElementById('delivery-pincode');
                const pincodeError = document.getElementById('pincode-error');
                const dateInput = document.getElementById('delivery-date');
                const dateError = document.getElementById('date-error');

                // Pincode validation (must start with 400)
                if (!pincodeInput.value.startsWith('400') || pincodeInput.value.length < 6) {
                    pincodeError.style.display = 'block';
                    isValid = false;
                } else {
                    pincodeError.style.display = 'none';
                }

                // Date validation (must be at least 2 days from now)
                const today = new Date();
                const selectedDate = new Date(dateInput.value);
                const minDate = new Date();
                minDate.setDate(today.getDate() + 2);

                if (selectedDate < minDate) {
                    dateError.style.display = 'block';
                    isValid = false;
                } else {
                    dateError.style.display = 'none';
                }
                
                // Add more validation for other fields (name, address, etc.)
                // For this demo, we'll keep it simple.
                return isValid;
            }

            /**
             * Simulates order processing.
             */
            function processOrder() {
                const btn = document.getElementById('process-payment-btn');
                const spinner = document.getElementById('payment-spinner');
                const btnText = document.getElementById('process-payment-btn-text');

                // Show loading state
                btn.disabled = true;
                spinner.style.display = 'inline-block';
                btnText.textContent = 'Processing...';

                // Simulate API call
                setTimeout(() => {
                    // Hide loading state
                    btn.disabled = false;
                    spinner.style.display = 'none';
                    btnText.textContent = 'Pay Now';

                    // Generate fake order number
                    document.getElementById('order-number').textContent = `#MF-${Math.floor(Date.now() / 1000)}`;
                    
                    // Go to confirmation step
                    goToCheckoutStep(4);

                    // Clear cart
                    cart = [];
                    updateCartCounter();
                    updateFullSummary();

                }, 2000); // 2-second delay
            }


            // ===================================
            // 5. CUSTOM STUDIO FORM FUNCTIONS
            // ===================================

            /**
             * Navigates between studio form steps.
             * @param {number} stepNumber - The step to navigate to (1, 2, 3).
             */
            function goToStudioStep(stepNumber) {
                currentStudioStep = stepNumber;

                // Hide all steps
                document.querySelectorAll('.studio-form-step').forEach(step => step.classList.remove('active-step'));
                // Show target step
                document.getElementById(`studio-form-step-${stepNumber}`).classList.add('active-step');

                // Update progress bar
                studioProgress.style.width = `${stepNumber * 33.33}%`;
            }
            
            /**
             * Validates Studio Step 1.
             * @returns {boolean} - True if valid.
             */
            function validateStudioStep1() {
                const guestsInput = document.getElementById('event-guests');
                const guestsError = document.getElementById('guests-error');
                if (guestsInput.value < 20) {
                    guestsError.style.display = 'block';
                    return false;
                }
                guestsError.style.display = 'none';
                return true;
            }

            /**
             * Submits the bespoke form (simulation).
             */
            function submitBespokeRequest() {
                // Add validation for all fields here...
                // For demo, we assume valid.
                
                studioFormWrapper.classList.add('hidden');
                studioSuccessMsg.classList.remove('hidden');

                // Reset form after a delay
                setTimeout(() => {
                    studioFormWrapper.classList.remove('hidden');
                    studioSuccessMsg.classList.add('hidden');
                    document.getElementById('studio-form-step-1').reset();
                    document.getElementById('studio-form-step-2').reset();
                    document.getElementById('studio-form-step-3').reset();
                    goToStudioStep(1);
                }, 8000);
            }

  // ===================================
            // 6. EVENT LISTENERS
            // ===================================

            // --- Page Navigation ---
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateTo(e.target.dataset.page);
                });
            });
            logo.addEventListener('click', () => navigateTo('home'));
            heroShopBtn.addEventListener('click', () => navigateTo('shop'));
            heroStudioBtn.addEventListener('click', () => navigateTo('studio'));
            
            // Handle dynamically created page buttons
            document.body.addEventListener('click', (e) => {
                if (e.target.matches('[data-page-btn]')) {
                    e.preventDefault();
                    navigateTo(e.target.dataset.pageBtn);
                }
            });

            // --- Add to Cart (Event Delegation) ---
            appContainer.addEventListener('click', (e) => {
                if (e.target.matches('.add-to-cart-btn')) {
                    e.preventDefault();
                    addToCart(e.target.dataset.productId);
                }
            });

            // --- Checkout Modal Triggers ---
            cartIcon.addEventListener('click', openCheckout);
            checkoutCloseBtn.addEventListener('click', closeCheckout);
            confirmationCloseBtn.addEventListener('click', closeCheckout);

            // --- Cart Item Actions (Event Delegation) ---
            modalCartList.addEventListener('click', (e) => {
                const target = e.target;
                const productId = target.dataset.productId;
                
                if (!productId) return;

                if (target.matches('.qty-increase')) {
                    handleQuantityChange(productId, 'increase');
                }
                if (target.matches('.qty-decrease')) {
                    handleQuantityChange(productId, 'decrease');
                }
                if (target.matches('.remove-item-btn')) {
                    removeFromCart(productId);
                }
            });

            modalCartList.addEventListener('change', (e) => {
                if (e.target.matches('.qty-input')) {
                    const productId = e.target.dataset.productId;
                    const newQuantity = parseInt(e.target.value, 10);
                    handleQuantityInput(productId, newQuantity);
                }
            });

            // --- Checkout Step Navigation ---
            checkoutNext1.addEventListener('click', () => goToCheckoutStep(2));
            checkoutPrev2.addEventListener('click', () => goToCheckoutStep(1));
            checkoutNext2.addEventListener('click', () => {
                if (validateDeliveryForm()) {
                    goToCheckoutStep(3);
                }
            });
            checkoutPrev3.addEventListener('click', () => goToCheckoutStep(2));
            processPaymentBtn.addEventListener('click', processOrder);

            // --- Custom Studio Form Navigation ---
            studioNext1.addEventListener('click', () => {
                if (validateStudioStep1()) {
                    goToStudioStep(2);
                }
            });
            studioPrev2.addEventListener('click', () => goToStudioStep(1));
            studioNext2.addEventListener('click', () => goToStudioStep(3));
            studioPrev3.addEventListener('click', () => goToStudioStep(2));
            studioSubmitBtn.addEventListener('click', submitBespokeRequest);

            // ===================================
            // 7. INITIALIZATION
            // ===================================
            function init() {
                // Render products on Home (first 3)
                renderProducts(homeProductGrid, productsDB.slice(0, 3));
                // Render all products on Shop page
                renderProducts(shopProductGrid, productsDB);
            }

            init(); // Run the app
        });
    </script>
</body>
</html>
